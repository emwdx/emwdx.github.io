<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Nora's Birthday Adventure - Character Sheet</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js" referrerpolicy="no-referrer"></script>
<style>
  :root {
    --ink: #0f172a;
    --accent: #e11d48;
  }
  body {
    background: #f4f4f5;
    font-family: "Inter", system-ui, -apple-system, sans-serif;
    color: var(--ink);
  }
  .sheet {
    background: #fff;
    max-width: 1000px;
    margin: 24px auto;
    padding: 28px;
    border-radius: 18px;
    box-shadow: 0 10px 40px rgba(15, 23, 42, 0.08);
    font-size: 18px;
  }
  h1, h2, h3 {
    font-weight: 800;
    letter-spacing: 0.01em;
    color: var(--ink);
  }
  h1 { font-size: 2.2rem; }
  h2 { font-size: 1.6rem; margin-top: 1.3rem; }
  h3 { font-size: 1.25rem; margin-top: 1rem; }
  label { font-weight: 700; font-size: 1.05rem; }
  input, textarea, select {
    font-size: 1.05rem !important;
  }
  textarea { min-height: 90px; }
  .pill {
    background: #fee2e2;
    color: #b91c1c;
    padding: 6px 12px;
    border-radius: 999px;
    font-weight: 700;
    font-size: 0.95rem;
  }
  .circle {
    width: 26px;
    height: 26px;
    border-radius: 50%;
    border: 2px solid #cbd5e1;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    margin-right: 6px;
    cursor: pointer;
    transition: all 0.15s ease;
    background: #fff;
    font-size: 18px;
    user-select: none;
  }
  .circle.filled {
    background: var(--accent);
    border-color: var(--accent);
    color: #fff;
    box-shadow: 0 6px 16px rgba(225, 29, 72, 0.3);
  }
  .square {
    width: 26px;
    height: 26px;
    border: 2px solid #cbd5e1;
    border-radius: 6px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    margin-right: 10px;
    cursor: pointer;
    transition: all 0.15s ease;
    background: #fff;
    font-size: 18px;
    user-select: none;
  }
  .square.filled {
    background: var(--accent);
    border-color: var(--accent);
    color: #fff;
    box-shadow: 0 6px 16px rgba(225, 29, 72, 0.3);
  }
  .inventory-item {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
    font-size: 1.05rem;
  }
  .limit-note {
    font-size: 0.95rem;
    color: #475569;
    margin-left: 8px;
  }
  .toolbar {
    position: sticky;
    top: 0;
    z-index: 20;
    background: rgba(244, 244, 245, 0.92);
    backdrop-filter: blur(8px);
    padding: 12px 0 4px;
  }
  .btn-accent {
    background: var(--accent);
    border-color: var(--accent);
  }
  .btn-accent:hover { background: #be123c; border-color: #be123c; }
  .counter {
    font-weight: 800;
    color: var(--accent);
  }
  .shake { animation: wiggle 0.25s; }
  @keyframes wiggle {
    0% { transform: translateX(0); }
    25% { transform: translateX(-4px); }
    50% { transform: translateX(4px); }
    75% { transform: translateX(-4px); }
    100% { transform: translateX(0); }
  }
</style>
</head>
<body>
  <div class="toolbar text-center">
    <div class="d-inline-flex gap-2">
      <button class="btn btn-accent text-white" id="downloadPdf">Download PDF</button>
      <button class="btn btn-outline-dark" id="printBtn">Print</button>
    </div>
  </div>

  <div class="sheet" id="sheet">
    <h1 class="mb-1">Nora's Birthday Adventure</h1>
    <div class="pill mb-4">Create your hero and bring them to life</div>
    <p><strong>Nora's Birthday Adventure Game</strong></p>
    <p>As part of the fun at the party, we will play a game where you will get to act, speak, and make decisions as a character and be part of a story we tell together. You can be anyone you want, including background, personality, and skills.</p>
    <p>Fill out the information below to tell Nora's dad about your character and he will put you into the story!</p>

    <h2>Character Info</h2>
    <div class="row g-3">
      <div class="col-12 col-md-6">
        <label class="form-label">Name and age</label>
        <input class="form-control" id="nameAge" placeholder="e.g., Sunflare the Dragon, age 8">
      </div>
      <div class="col-12 col-md-6">
        <label class="form-label">Creature Type</label>
        <input class="form-control" id="creatureType" placeholder="dragon, chicken, wolf, snake, etc.">
      </div>
      <div class="col-12 col-md-6">
        <label class="form-label">Role</label>
        <input class="form-control" id="role" placeholder="knight, healer, scout, wizard, trickster, etc.">
      </div>
    </div>

    <h2 class="mt-4">Personality</h2>
    <div class="row g-3">
      <div class="col-12 col-md-4">
        <label class="form-label">Three words that describe you</label>
        <textarea class="form-control" id="personalityWords"></textarea>
      </div>
      <div class="col-12 col-md-4">
        <label class="form-label">What makes you brave?</label>
        <textarea class="form-control" id="brave"></textarea>
      </div>
      <div class="col-12 col-md-4">
        <label class="form-label">Something silly or funny about you</label>
        <textarea class="form-control" id="funny"></textarea>
      </div>
    </div>

    <h2 class="mt-4">Backstory</h2>
    <div class="row g-3">
      <div class="col-12 col-md-4">
        <label class="form-label">Where is your hero from?</label>
        <textarea class="form-control" id="from"></textarea>
      </div>
      <div class="col-12 col-md-4">
        <label class="form-label">What does your hero want most?</label>
        <textarea class="form-control" id="want"></textarea>
      </div>
      <div class="col-12 col-md-4">
        <label class="form-label">What is your hero afraid of, and why?</label>
        <textarea class="form-control" id="afraid"></textarea>
      </div>
    </div>

    <h2 class="mt-4 d-flex align-items-center gap-2">Skill Points <span class="counter" id="skillCount">0/20</span></h2>
    <p>You get to decide what your character is good at! You have <strong>20 circles</strong> total.<br>
    You can fill them in however you want â€” all in one skill, spread out evenly, or anything in between.<br>
    A dragon might be great at magic, a chicken might be super speedy, and a knight might have lots of strength.<br>
      <p class="text-muted">Tap circles to assign up to 20 points across all skills.</p>
    <div class="table-responsive">
      <table class="table table-borderless align-middle">
        <thead>
          <tr><th>Skill</th><th>Points</th></tr>
        </thead>
        <tbody id="skillsTable"></tbody>
      </table>
    </div>

    <h2 class="mt-4 d-flex align-items-center gap-2">Inventory <span class="counter" id="inventoryCount">0/6</span></h2>
    <p>You may choose <strong>any 6 items</strong> from the list below.<br>
    Think about what your character might carry on an adventure:<br>
    a lantern for dark caves, a healing potion for emergencies, or a whispering stone to talk to mysterious creatures!</p>
      <p class="text-muted">Pick up to 6 items.</p>
    <div class="row" id="inventoryGrid"></div>
  </div>

<script>
  const skills = [
    "Strength (lifting, fighting, pushing)",
    "Speed (running, dodging)",
    "Magic (spells, cool powers)",
    "Cleverness (puzzles, tricks)",
    "Kindness (helping friends, calming creatures)"
  ];
  const inventoryItems = [
    "Sword","Shield","Stink Bomb","Rope","Lantern","Feathered Cloak","Healing Potion","Map","Feather","Golden Coin",
    "Magic Scroll","Crystal Ball","Mystic Amulet","Whispering Stone","Ancient Tome","Wind-Song Flute","Enchanted Compass","Dragon Scale","Silver Coin","Banana Peel"
  ];
  const maxSkillPoints = 20;
  const maxInventory = 6;

  function createSkills() {
    const tbody = document.getElementById('skillsTable');
    skills.forEach((skill, skillIndex) => {
      const tr = document.createElement('tr');
      const nameTd = document.createElement('td');
      nameTd.textContent = skill;
      const circlesTd = document.createElement('td');
      for (let i = 0; i < 6; i++) {
        const c = document.createElement('div');
        c.className = 'circle';
        c.dataset.skill = skillIndex;
        c.dataset.index = i;
        c.addEventListener('click', toggleCircle);
        circlesTd.appendChild(c);
      }
      tr.appendChild(nameTd);
      tr.appendChild(circlesTd);
      tbody.appendChild(tr);
    });
  }

  function createInventory() {
    const grid = document.getElementById('inventoryGrid');
    inventoryItems.forEach((item, idx) => {
      const col = document.createElement('div');
      col.className = 'col-12 col-md-6';
      const row = document.createElement('div');
      row.className = 'inventory-item';
      const box = document.createElement('div');
      box.className = 'square';
      box.dataset.item = idx;
      box.addEventListener('click', toggleInventory);
      const label = document.createElement('span');
      label.textContent = item;
      row.appendChild(box);
      row.appendChild(label);
      col.appendChild(row);
      grid.appendChild(col);
    });
  }

  function totalSkillSelected() {
    return document.querySelectorAll('.circle.filled').length;
  }
  function updateSkillCounter() {
    document.getElementById('skillCount').textContent = totalSkillSelected() + '/' + maxSkillPoints;
  }
  function toggleCircle(e) {
    const target = e.currentTarget;
    const isFilled = target.classList.contains('filled');
    const currentTotal = totalSkillSelected();
    if (!isFilled && currentTotal >= maxSkillPoints) {
      target.classList.add('shake');
      setTimeout(() => target.classList.remove('shake'), 250);
      return;
    }
    target.classList.toggle('filled');
    updateSkillCounter();
  }

  function totalInventorySelected() {
    return document.querySelectorAll('.square.filled').length;
  }
  function updateInventoryCounter() {
    document.getElementById('inventoryCount').textContent = totalInventorySelected() + '/' + maxInventory;
  }
  function toggleInventory(e) {
    const target = e.currentTarget;
    const isFilled = target.classList.contains('filled');
    const currentTotal = totalInventorySelected();
    if (!isFilled && currentTotal >= maxInventory) {
      target.classList.add('shake');
      setTimeout(() => target.classList.remove('shake'), 250);
      return;
    }
    target.classList.toggle('filled');
    updateInventoryCounter();
  }

  document.getElementById('downloadPdf').addEventListener('click', () => {
    const element = document.getElementById('sheet');
    const opt = {
      margin:       0.4,
      filename:     'nora_character_sheet.pdf',
      image:        { type: 'jpeg', quality: 0.98 },
      html2canvas:  { scale: 2, backgroundColor: '#ffffff' },
      jsPDF:        { unit: 'in', format: 'letter', orientation: 'portrait' }
    };
    html2pdf().set(opt).from(element).save();
  });

  document.getElementById('printBtn').addEventListener('click', () => {
    window.print();
  });

  // build UI
  createSkills();
  createInventory();
  updateSkillCounter();
  updateInventoryCounter();
</script>
</body>
</html>
